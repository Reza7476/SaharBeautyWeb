@page "{handler?}"
@model SaharBeautyWeb.Pages.Auth.RegisterModel
@{
    Layout = null;
    ViewData["Title"] = "ثبت‌نام";
}

<script src="~/Layout/Admin/assets/libs/jquery/jquery.min.js"></script>
<link href="~/layout/admin/assets/css/pages/auth/auth.css" rel="stylesheet" />

<div class="register-container">
    <div class="form-card register-box">
        <div class="form-header">
            <h2>ثبت‌نام</h2>
        </div>

        <!-- مرحله ۱: شماره موبایل -->
        <form id="step-one-form" method="post" asp-page-handler="SendOtp" class="form-step active">
            @Html.AntiForgeryToken()
            <div class="form-group">
                <label asp-for="StepOne.MobileNumber">شماره موبایل</label>
                <input type="tel" id="MobileNumber"
                    placeholder="مثلاً 09123456789"
                    maxlength="11" 
                    pattern="09\d{9}"
                    required 
                    asp-for="StepOne.MobileNumber" />
                    <span asp-validation-for="StepOne.MobileNumber"></span>
            </div>
            <div class="error-message" id="error-register" style="display:none"></div>
            <button type="submit" class="btn" id="step-one-btn">ارسال کد تأیید</button>
        </form>

        <!-- مرحله ۲: OTP و اطلاعات کاربر -->
        <form id="step-two-form" method="post" asp-page-handler="VerifyOtp" class="form-step">
            @Html.AntiForgeryToken()

            <p class="otp-text">
                کد ۶ رقمی ارسال‌شده را وارد کنید
                <span id="timer" class="timer-inline">02:00</span>
            </p>

            <div class="otp-inputs">
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
            </div>
            <span asp-validation-for="StepTwo.OtpCode" ></span>

            <input asp-for="StepTwo.OtpRequestId" id="Otp-request-id" type="hidden" />
            <input asp-for="StepTwo.OtpCode" id="otpCodFull" maxlength="6" min="6" type="hidden" />
            
            <div class="form-group">
                <label asp-for="StepTwo.Name">نام</label>
                <input type="text" id="name" asp-for="StepTwo.Name" required />
                <span asp-validation-for="StepTwo.Name"></span>
            </div>
            <div class="form-group">
                <label asp-for="StepTwo.LastName">نام خانوادگی</label>
                <input type="text" id="lastName" asp-for="StepTwo.LastName" required />
                <span asp-validation-for="StepTwo.LastName" ></span>
            </div>
            <div class="form-group">
                <label asp-for="StepTwo.UserName">نام کاربری</label>
                <input type="text" id="username" asp-for="StepTwo.UserName" required />
                <span asp-validation-for="StepTwo.UserName" ></span>

            </div>
            <div class="form-group">
                <label asp-for="StepTwo.Email">ایمیل</label>
                <input type="email" id="email" asp-for="StepTwo.Email" />
            </div>
            <div class="form-group">
                <label asp-for="StepTwo.Password">رمز عبور</label>
                <input type="password" id="pass" asp-for="StepTwo.Password" required />
                <span asp-validation-for="StepTwo.Password" ></span>
            </div>
            <div class="form-group">
                <label asp-for="StepTwo.RepeatPassword">تکرار رمز عبور</label>
                <input type="password" id="repeatpass" asp-for="StepTwo.RepeatPassword" required />
                <span asp-validation-for="StepTwo.RepeatPassword" ></span>

            </div>

            <button type="submit" class="btn" id="verify-otp-btn">تکمیل ثبت‌نام</button>
        </form>
    </div>
</div>


<script>
    var sendOtp = '@Url.Page("Register", "SendOtp")';
    var verifyOtp = '@Url.Page("Register", "VerifyOtp")';
</script>
<script src="~/layout/admin/assets/js/pages/userPanels/auth/register.js"></script>



