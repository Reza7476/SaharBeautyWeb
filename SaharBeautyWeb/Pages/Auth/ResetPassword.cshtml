@page
@model SaharBeautyWeb.Pages.Auth.ResetPasswordModel
@{
    Layout = null;
    ViewData["Title"] = "تغییر رمز عبور";
}
<link href="~/layout/admin/assets/css/pages/auth/registerstyle.css" rel="stylesheet" />
<script src="~/Layout/Admin/assets/libs/jquery/jquery.min.js"></script>

<div class="register-container">
    <div class="register-box">
        <div class="top-actions">
            <button type="button" class="btn btn-secondary btn-back" id="go-home">بازگشت به صفحه اصلی</button>
        </div>
        <h2>تغییر رمز عبور </h2>

        <!-- مرحله ۱: شماره موبایل -->
        <form id="step-one-form" method="post" asp-page-handler="SendOtp" class="form-step active">
            @Html.AntiForgeryToken()
            <div class="form-group">
                <label asp-for="StepOne.MobileNumber">شماره موبایل</label>
                <input type="tel"
                       id="MobileNumber"
                       placeholder="مثلاً 09123456789"
                       pattern="09\d{9}"
                       maxlength="11"
                       required
                       asp-for="StepOne.MobileNumber" />
                <span asp-validation-for="StepOne.MobileNumber"></span>
            </div>

            <div class="alert alert-danger" id="error-register">
            </div>

            <button type="submit" id="step-one-btn" class="btn">ارسال کد تأیید</button>
        </form>

        <!-- مرحله ۲: OTP و اطلاعات کاربر -->
        <form id="step-two-form" method="post" asp-page-handler="VerifyOtp" class="form-step">

            @Html.AntiForgeryToken()

            <p class="otp-text">
                کد ۶ رقمی ارسال‌شده را وارد کنید
                <span id="timer" class="timer-inline">00:50</span>
            </p>

            <div class="otp-inputs">
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
            </div>

            <input asp-for="StepTwo.OtpRequestId"
                   id="Otp-request-id"
                   type="hidden" />

            <input asp-for="StepTwo.OtpCode"
                   id="otpCodFull"
                   maxlength="6"
                   min="6"
                   required
                   type="Hidden" />

            <div class="form-group">
                <label asp-for="StepTwo.Password">رمز عبور</label>
                <input type="password" id="pass" asp-for="StepTwo.Password" required />
                <span asp-validation-for="StepTwo.Password"></span>
            </div>
            <div class="form-group">
                <label asp-for="StepTwo.RepeatPassword">تکرار رمز عبور</label>
                <input type="password" id="repeatpass" asp-for="StepTwo.RepeatPassword" required />
                <span asp-validation-for="StepTwo.RepeatPassword"></span>
            </div>

            <button type="submit" class="btn" id="verify-otp-btn">تکمیل فرم</button>

        </form>
    </div>
</div>

<script src="~/layout/admin/assets/js/pages/userpanels/auth/resetpasswordjs.js"></script>
<script>
    var sendOtp = '@Url.Page("ResetPassword", "SendOtp")';
    var verifyOtp = '@Url.Page("ResetPassword", "VerifyOtp")';
</script>
