@page
@model SaharBeautyWeb.Pages.Auth.ResetPasswordModel
@{
    Layout = null;
    ViewData["Title"] = "تغییر رمز عبور";
}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ورود به سالن زیبایی</title>

    <link href="~/layout/admin/assets/css/pages/auth/auth.css" rel="stylesheet" />
    <script src="~/Layout/Admin/assets/libs/jquery/jquery.min.js"></script>
</head>

<body>

    <div class="auth-container">
        <div class="top-actions">
            <button type="button" class="btn btn-back" id="go-home">بازگشت به صفحه اصلی</button>
        </div>

        <h2>تغییر رمز عبور</h2>

        <!-- مرحله ۱: ارسال کد -->
        <form id="step-one-form" method="post" asp-page-handler="SendOtp" class="form-step active">
            @Html.AntiForgeryToken()

            <div class="form-group">
                <label asp-for="StepOne.MobileNumber">شماره موبایل</label>
                <input type="tel"
                       id="MobileNumber"
                       name="StepOne.MobileNumber"
                       placeholder="مثلاً 09123456789"
                       pattern="09\d{9}"
                       maxlength="11"
                       required />
                <span asp-validation-for="StepOne.MobileNumber"></span>
            </div>

            <div class="alert" id="error-register" style="display:none"></div>

            <button type="submit" id="step-one-btn" class="btn">ارسال کد تأیید</button>
        </form>

        <!-- مرحله ۲: وارد کردن کد و رمز جدید -->
        <form id="step-two-form" method="post" asp-page-handler="VerifyOtp" class="form-step">
            @Html.AntiForgeryToken()

            <p>کد ۶ رقمی ارسال‌شده را وارد کنید <span id="timer" class="timer-inline">02:00</span></p>

            <div class="otp-inputs">
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
                <input type="text" maxlength="1" class="otp-box" />
            </div>

            <input type="hidden" id="Otp-request-id" name="StepTwo.OtpRequestId" />
            <input type="hidden" id="otpCodFull" name="StepTwo.OtpCode" />

            <div class="form-group">
                <label asp-for="StepTwo.Password">رمز عبور جدید</label>
                <input type="password" id="pass" name="StepTwo.Password" required />
                <span asp-validation-for="StepTwo.Password"></span>
            </div>

            <div class="form-group">
                <label asp-for="StepTwo.RepeatPassword">تکرار رمز عبور</label>
                <input type="password" id="repeatpass" name="StepTwo.RepeatPassword" required />
                <span asp-validation-for="StepTwo.RepeatPassword"></span>
            </div>

            <button type="submit" class="btn" id="verify-otp-btn">تغییر رمز عبور</button>
        </form>
    </div>



    <script src="~/layout/admin/assets/js/pages/userpanels/auth/resetpasswordjs.js"></script>
    <script>
        var sendOtp = '@Url.Page("ResetPassword", "SendOtp")';
        var verifyOtp = '@Url.Page("ResetPassword", "VerifyOtp")';
    </script>

</body>
</html>