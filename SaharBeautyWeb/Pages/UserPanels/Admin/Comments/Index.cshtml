@page
@using SaharBeautyWeb.Configurations.Extensions
@model SaharBeautyWeb.Pages.UserPanels.Admin.Comments.IndexModel
@{
    Layout = "_UserPanelLayout";
    ViewData["ActiveMenu"] = "CommentList";
}

<link href="~/layout/admin/assets/css/pages/commentlist/comment-list.css" rel="stylesheet" />

<div class="container">
    <h2 class="page-title">لیست نظرات کاربران</h2>

    <div class="appointments-card">
        <table class="treatments-table">
            <thead>
                <tr>
                    <th>نام خدمت</th>
                    <th>نظر کاربر</th>
                    <th>تاریخ ثبت نظر</th>
                    <th>امتیاز</th>
                    <th>انتشار یافته</th>
                    <th>نام کاربر</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.ReviewModel.AllAppointmentReview)
                {
                    <tr>
                        <td data-label="نام خدمت">@item.TreatmentTitle</td>

                        <td data-label="نظر کاربر" class="review-text">
                            <div class="multiline-truncate">@item.Comment!</div>
                        </td>

                        <td data-label="تاریخ ثبت نظر">
                            @item.CreatedAt.ConvertGregorianDateWithTimeToShamsi()
                        </td>

                        <td data-label="امتیاز">
                            @for (int i = 0; i < item.Rate; i++)
                            {
                                <span class="stars">
                                    <i class="fa-solid fa-star"></i>
                                </span>
                            }
                        </td>

                        <td data-label="انتشار یافته">
                            <label class="switch">
                                <input type="checkbox" class="publish-toggle" data-id="@item.Id" @(item.IsPublished ? "checked" : "") />
                                <span class="slider round"></span>
                            </label>
                        </td>

                        <td data-label="نام کاربر">@($"{item.Name} {item.LastName}")</td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- Pagination -->
        <div class="row align-items-center justify-content-center justify-content-md-between mt-4 pagination-wrapper">
            <div class="col-md-5 col-12 text-center text-md-start mb-3 mb-md-0">
                <div class="dataTables_info text-muted">
                    مجموع: <strong>@Model.ReviewModel.TotalElements</strong> مورد
                </div>
            </div>

            <div class="col-md-7 col-12">
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center flex-wrap mb-0">
                        <li class="page-item @(Model.ReviewModel.CurrentPage == 0 ? "disabled" : "")">
                            <a class="page-link" asp-page="Index" asp-route-pageNumber="@(Model.ReviewModel.CurrentPage - 1)">
                                &laquo;
                            </a>
                        </li>

                        <li class="page-item active">
                            <span class="page-link">
                                @(Model.ReviewModel.CurrentPage + 1) از @(Model.ReviewModel.TotalPages + 1)
                            </span>
                        </li>

                        <li class="page-item @(Model.ReviewModel.CurrentPage == Model.ReviewModel.TotalPages ? "disabled" : "")">
                            <a class="page-link" asp-page="Index" asp-route-pageNumber="@(Model.ReviewModel.CurrentPage + 1)">
                                &raquo;
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        var changePublished = '@Url.Page("Index", "ChangePublishStatus")';
    </script>
    <script src="~/layout/admin/assets/js/pages/userpanels/admin/comment-reviews/review-comments.js"></script>
}
